spring:
  # --- DATASOURCE CONFIGURATION (for PostgreSQL) ---
  datasource:
    url: jdbc:postgresql://cav90t0tlkv4jb.cluster-czrs8kj4isg7.us-east-1.rds.amazonaws.com:5432/decphbihs89i7j
    username: ud96qhmmahggsm
    password: pdd5cb3091269be84f7af868bb733d17177edb69ce5bd436882d22d7e0947e037
    driver-class-name: org.postgresql.Driver

  # --- JPA & HIBERNATE CONFIGURATION ---
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    properties:
      hibernate:
        format_sql: true
        default_batch_fetch_size: 50

  # --- REDIS CONFIGURATION (for WebSocket Message Broker) ---
  data:
    redis:
      host: localhost
      port: 6379

  # --- WEBSOCKET CONFIGURATION FIX (Add this section) ---
  websocket:
    # Fixes CloseStatus[code=1009] by increasing the max message buffer size to 5MB.
    frame-max-message-size: 5242880

# --- SERVER CONFIGURATION ---
server:
  use-forward-headers: true

  # --- FILE UPLOAD SIZE LIMIT FIX (CRITICAL FOR 500 ERROR) ---
  servlet:
    multipart:
      max-file-size: 50MB   # Max size for a single file part
      max-request-size: 50MB # Max size for the entire request payload

# --- APPLICATION SPECIFIC PROPERTIES ---
app:
  jwtSecret: ${APP_JWT_SECRET:GGatK92BfXN4f3KYGiQdZkiuPdMna+llVG21n1A9M64=}
  jwtExpirationMs: 86400000

# --- LOGGING CONFIGURATION ---
logging:
  level:
    org:
      springframework:
        security: DEBUG
        messaging: DEBUG
        web:
          socket: DEBUG

# --- FIREBASE CONFIGURATION ---
firebase:
  project-id: sitprep-new